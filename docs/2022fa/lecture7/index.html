<!doctype html>
<html class="docs-version-2022fa" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<title data-react-helmet="true">Lecture 7 | Trends in Web Dev</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://webdev.cornelldti.org/docs/2022fa/lecture7"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2022fa"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2022fa"><meta data-react-helmet="true" property="og:title" content="Lecture 7 | Trends in Web Dev"><meta data-react-helmet="true" name="description" content="Lecture Slides"><meta data-react-helmet="true" property="og:description" content="Lecture Slides"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://webdev.cornelldti.org/docs/2022fa/lecture7"><link data-react-helmet="true" rel="alternate" href="https://webdev.cornelldti.org/docs/2022fa/lecture7" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://webdev.cornelldti.org/docs/2022fa/lecture7" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.53ee0a34.css">
<link rel="preload" href="/assets/js/runtime~main.a01393e0.js" as="script">
<link rel="preload" href="/assets/js/main.f3425def.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Cornell DTI Web Development Course Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="Cornell DTI Web Development Course Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Trends in Web Dev</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/docs/2022fa/introduction">2022fa</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/introduction">2024fa</a></li><li><a class="dropdown__link" href="/docs/2024sp/lecture7">2024sp</a></li><li><a class="dropdown__link" href="/docs/2023fa/lecture7">2023fa</a></li><li><a class="dropdown__link" href="/docs/2023sp/lecture7">2023sp</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/2022fa/lecture7">2022fa</a></li><li><a class="dropdown__link" href="/docs/2022sp/lecture7">2022sp</a></li><li><a class="dropdown__link" href="/docs/2021fa/lecture7">2021fa</a></li><li><a class="dropdown__link" href="/docs/2021sp/lecture7">2021sp</a></li><li><a class="dropdown__link" href="/docs/2020fa/lecture7">2020fa</a></li><li><a class="dropdown__link" href="/docs/2020sp/lecture7">2020sp</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/introduction">Getting Started</a><a class="navbar__item navbar__link" href="/docs/unit1">Lectures</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cornell-dti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Lectures</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2022fa/lecture1">Lecture 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2022fa/lecture2">Lecture 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2022fa/lecture3">Lecture 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2022fa/lecture4">Lecture 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2022fa/lecture5">Lecture 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2022fa/lecture6">Lecture 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2022fa/lecture7">Lecture 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2022fa/lecture8">Lecture 8</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2022fa/lecture9">Lecture 9</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Assignments</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Trends in Web Dev<!-- --> <b>2022fa</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/introduction">latest version</a></b> (<!-- -->2024fa<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->2022fa</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Lecture 7</h1></header><p><a href="https://docs.google.com/presentation/d/1kvB0qMpubHe0dUMLni_e4GrGujrWF1ie/edit#slide=id.p39" target="_blank" rel="noopener noreferrer">Lecture Slides</a></p><p><a href="/docs/2022fa/assignment4">Assignment 4</a> (Due 11/14 at 11:59pm)</p><p><a href="/docs/2022fa/finalproject">Final Project</a> (MS0 Due 11/21, MS1 Due 11/28, MS2 Due 12/5, MS3 Due 12/13 at 11:59pm)</p><header><h1>Some Theory</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="querying-methods-for-your-reactnextjs-app">Querying Methods for your React/Next.js App<a aria-hidden="true" class="hash-link" href="#querying-methods-for-your-reactnextjs-app" title="Direct link to heading">â€‹</a></h2><table><thead><tr><th>Promise-Based</th><th>Real-Time</th></tr></thead><tbody><tr><td>If you need the data now, you can query for it</td><td>You already have the data</td></tr><tr><td>Data queries can be decentralized (done in any component)</td><td>Data queries are fetched and memoized through centralized (React) hooks</td></tr><tr><td>Quering data is imperative can quickly become spaghetti (and you lose some of the advantages of a declarative web UI framework)</td><td>Up-front cost to query data that pays off (because you don&#x27;t <em>Hopefully</em> have to query it again)</td></tr><tr><td>There is no cleanup code</td><td>You first have to &quot;subscribe&quot; to changes in the data, then unsubscribe after you are done (kind of like opening and closing a file stream when reading a file)</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="how-do-callbackpromise-based-vs-real-time-queries-look-like">How do Callback/Promise-based vs. Real-Time Queries Look Like?<a aria-hidden="true" class="hash-link" href="#how-do-callbackpromise-based-vs-real-time-queries-look-like" title="Direct link to heading">â€‹</a></h3><table><thead><tr><th>Promise-Based</th><th>Real-Time</th></tr></thead><tbody><tr><td>Single query, single async result</td><td>Single query, a stream of async results</td></tr><tr><td>- Async: result arrives at an unspecified time, outside the sequential execution context of the rest of your code</td><td>- ex: weather data</td></tr><tr><td>Run once, pass along indefinitely downstream (children &amp; other descendants of your component)</td><td>Listenable data that needs to be &quot;subscribed to&quot;</td></tr><tr><td>Typically reacts to some update</td><td>Built on top of WebSockets</td></tr><tr><td>-ex: user click, first time a component loads, etc.</td><td>- ex: an abstraction over a byte stream</td></tr><tr><td></td><td>Good forâ€¦ real-time applications</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="how-do-callbackpromised-based-vs-real-time-queries-work">How Do Callback/Promised Based vs. Real-Time Queries Work?<a aria-hidden="true" class="hash-link" href="#how-do-callbackpromised-based-vs-real-time-queries-work" title="Direct link to heading">â€‹</a></h3><table><thead><tr><th>Promise-Based</th><th>Real-Time</th></tr></thead><tbody><tr><td>Typically calls a (backend) API route that fetches &amp; returns data to you</td><td>Might call a backend route to pass data over a WebSocket</td></tr><tr><td>Usually built on top of HTTP requests</td><td>Or simply uses an API library to make calls directly to a database</td></tr><tr><td>Built on top pf HTTP Requests</td><td>- ex: Firebase Firestore call</td></tr><tr><td></td><td>Usually wrapped in a library like RxJSâ€™s Observable data type or function calls that allow you to subscribe to changes</td></tr><tr><td></td><td></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="choosing-a-querying-method">Choosing a Querying Method<a aria-hidden="true" class="hash-link" href="#choosing-a-querying-method" title="Direct link to heading">â€‹</a></h3><p>As described in the first section, the type of queries your application will use will affect the app&#x27;s architecture.
In particular, real-time queries play nicely with having a centralized query that runs over a listenable data access object that is &quot;owned&quot; either by</p><ol><li>a top-level component (OK in small apps, but prone to prop drilling in more complex apps), or</li><li>a custom React hook that wraps an effect (triggering an update when the data access object publishes a new version of the data)</li></ol><p>That is not to say that your app cannot use both types of queries. It is just that a real-time application requires a specific architecture in which all data is queried first and passed along to components as props or referenced by components via (potentially custom) React/Redux hooks. This does not play nicely with callback/Promise-based queries because the data from the callback/Promise-based queries may be in an inconsistent state by the time the data from a real-time query has updated.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="your-firebase-firestore-application-callbackpromise-based-or-real-time-queries">Your Firebase Firestore Application: Callback/Promise-based or Real-Time Queries<a aria-hidden="true" class="hash-link" href="#your-firebase-firestore-application-callbackpromise-based-or-real-time-queries" title="Direct link to heading">â€‹</a></h2><p>Firestore offers you a database that nicely organizes your data into <em>documents</em> and <em>collections</em> (groups of documents). It allows you to build queries that can either</p><ol><li>return <em>once</em> with a single snapshot of data (a Promise-based query), or</li><li>allow you to hook into the data&#x27;s live values (a real-time query).</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="firestore-real-time-queries">Firestore Real-time Queries<a aria-hidden="true" class="hash-link" href="#firestore-real-time-queries" title="Direct link to heading">â€‹</a></h2><p>Provides collection + document data as an listenable (subscribable) data object</p><ul><li>As soon as a collection updates, the collection access object publishes a new version of the collection</li><li>As soon as a doc updates, the doc access object publishes a new version of the doc
This can be passed as a React prop or an effect dependency, which triggers a component update!</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="anatomy-of-a-firebase-firestore-real-time-application-the-full-stack">Anatomy of a Firebase Firestore Real-Time Application (The &quot;Full&quot; Stack)<a aria-hidden="true" class="hash-link" href="#anatomy-of-a-firebase-firestore-real-time-application-the-full-stack" title="Direct link to heading">â€‹</a></h2><p><img alt="Anatomy of a Firebase Firestore Real-Time Update" src="/assets/images/firestore-real-time-a90f29184434d35c8cd763ff852134fc.png"></p><p>Unlike callback/promise-based queries, the connection between updating and fetching data is completely gone. Updating data occurs along an entirely separate channel from subscribing to the data. This means that implementing calls to update data will look very different</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="miscellaneous-advice">Miscellaneous Advice<a aria-hidden="true" class="hash-link" href="#miscellaneous-advice" title="Direct link to heading">â€‹</a></h2><p>When designing a system:</p><ul><li>avoid two-way dependencies (or as many dependencies as possible)<ul><li>as with React &amp; declarative web frameworks, one-way data binding is the way to go</li><li>avoids: more things to update</li><li>avoids: more surface area for synchronization errors</li></ul></li></ul><p>This philosophy helps us prefer real-time queries over Promise-based queries, because there is only a single dependency for the queried data, rather than the set of all the decentralized Promise-based queries.</p><header><h1>The Practice</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="the-problem">The Problem<a aria-hidden="true" class="hash-link" href="#the-problem" title="Direct link to heading">â€‹</a></h2><p>Suppose you want to create a book rating platform ðŸ“š! Users will be able to search a book by title or author and see its avg. rating.</p><p>Users will be able to submit book reviews ðŸ“© (one per book title max!) for a given title + author with a rating of 1-5 stars.</p><p>A review on a new book will upsert the set of books with a new book (if necessary) and a review associated with that book.</p><p>What can the user see?</p><ul><li>Reviews</li><li>by book title</li><li>by author</li><li>by reviewer</li><li>sort by avg. rating</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="modeling-the-problem">Modeling the Problem<a aria-hidden="true" class="hash-link" href="#modeling-the-problem" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="q-what-are-the-main-entities-in-the-model">Q: What are the main entities in the model?<a aria-hidden="true" class="hash-link" href="#q-what-are-the-main-entities-in-the-model" title="Direct link to heading">â€‹</a></h3><p>AKA, what moving parts contribute to the changing data in the system?</p><ul><li>books (have authors &amp; get reviewed)</li><li>users (user === reviewer)</li><li>book reviews (for a book, by a user)</li><li>author (books may have the same title but different authors)</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="q-if-each-entity-can-be-represented-by-a-data-object-what-will-the-structure-be-like">Q: If each Entity can be represented by a data object, what will the structure be like?<a aria-hidden="true" class="hash-link" href="#q-if-each-entity-can-be-represented-by-a-data-object-what-will-the-structure-be-like" title="Direct link to heading">â€‹</a></h3><p><em>Book</em></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">- title (string)</span><br></span><span class="token-line"><span class="token plain">- author (string)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><em>Review</em></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">- rating (number 1-5)</span><br></span><span class="token-line"><span class="token plain">- description (string)</span><br></span><span class="token-line"><span class="token plain">- title (string)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">- author (string)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><em>Reviewer/User</em></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">- email (string)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><em>Author</em></p><p>Authors are not a primary entity. The author is a very simple object that does not &quot;own&quot; any other data, at least according to the specifications of our book reviews platform. We may need to fetch books by author, but we do not ever need to know the list of all authors, for example.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="building-out-our-solution">Building Out our Solution<a aria-hidden="true" class="hash-link" href="#building-out-our-solution" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="q-what-typescript-types-do-we-need-to-write-make-our-data-structures-concrete">Q: What Typescript types do we need to write make our data structures concrete?<a aria-hidden="true" class="hash-link" href="#q-what-typescript-types-do-we-need-to-write-make-our-data-structures-concrete" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="aside-types-or-interfaces">Aside: Types or Interfaces?<a aria-hidden="true" class="hash-link" href="#aside-types-or-interfaces" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th>Type</th><th>Interface</th></tr></thead><tbody><tr><td>Better suited for raw data</td><td>Useful for a communication protocol or for rich objects with behavior (methods)</td></tr><tr><td>(typically) has no functionality</td><td>Implemented by a class, which handles methods (class functions) efficiently</td></tr><tr><td>Supports declaring methods, but this can only be implemented less efficiently</td><td>Usually wrapped in a library like RxJSâ€™s Observable data type</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_y2LR" id="so-what-will-our-database-type-schema-look-like">So What will our database type schema look like?<a aria-hidden="true" class="hash-link" href="#so-what-will-our-database-type-schema-look-like" title="Direct link to heading">â€‹</a></h4><p>A no-brainer! Just take the above and shove them into a TypeScript file (types/index.ts):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">FireBook</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  title</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  author</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">FireReview</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  rating</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">number</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  title</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  author</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  reviewer</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">FireReviewer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  email</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note that the primary reason we create a FireReviewer (user) for the site is to make authentication easiser. Firebase has nice features that can allow easy sign-on with Google OAuth and can pass along the signed in user&#x27;s uid and email for us to store into Firestore into a <code>reviewers</code> collection. Nice.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="upgrading-our-types">Upgrading our Types<a aria-hidden="true" class="hash-link" href="#upgrading-our-types" title="Direct link to heading">â€‹</a></h4><p>There is a slight problem: the types shown above are perfect for enforcing/describing the data going into Book, Review, and Reviewer documents. But they are not enough to address a specific document! In order to address a specific document, it is necessary to create track an ID.</p><p>What we can do is the following: create an new FireDocument type and declare new types for Book, Review, and Reviewer as an intersection of FireXX and FireDocument!</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">FireDoc</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  id</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Book</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> FireDoc </span><span class="token operator" style="color:rgb(56, 58, 66)">&amp;</span><span class="token plain"> FireBook</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Review</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> FireDoc </span><span class="token operator" style="color:rgb(56, 58, 66)">&amp;</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Reviewer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> FireDoc </span><span class="token operator" style="color:rgb(56, 58, 66)">&amp;</span><span class="token plain"> FireReviewer</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Great! Now we can address specific documents. In this case, the <code>uid</code> of a logged-in user will serve as the <code>id</code> of the user&#x27;s own document. Now given a full Review type, for example, it is possible for Firestore to retreive the exact Review that we need.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="setting-up-our-database">Setting Up our Database<a aria-hidden="true" class="hash-link" href="#setting-up-our-database" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-collections">Create Collections<a aria-hidden="true" class="hash-link" href="#create-collections" title="Direct link to heading">â€‹</a></h3><p>In order to track our Books, Reviews, and users (reviewers), we need to create collections for them each. Let&#x27;s call them <code>books</code>, <code>reviewers</code>, and <code>reviews</code>.</p><p>Let&#x27;s start a collection!
<img alt="Starting a Collection" src="/assets/images/start-collection-5d6f62d8a4045a5bb607f72ee42a2c78.png"></p><p>Now let&#x27;s give it a name!
<img alt="Creating a Collection" src="/assets/images/save-collection-492d86f53cfb36183b76e6819e780a3b.png"></p><p>(Now repeat this for the other two collections)</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="set-up-authentication">Set Up Authentication<a aria-hidden="true" class="hash-link" href="#set-up-authentication" title="Direct link to heading">â€‹</a></h3><p>As mentioned above, Firebase has nice integration with Google sign-on. Let&#x27;s take advantage of this!</p><p>Open the Authentication Tab...
<img alt="Opening the Authentication Tab" src="/assets/images/open-auth-f7dd76cab784f8cb4d176929fc0ee4f5.png"></p><p>...and select the &#x27;Google&#x27; authentication strategy (this uses the Google sign-on)
<img alt="Choosing the Google Auth strategy" src="/assets/images/choose-auth-d5d53b0b844b4f8aadfaf3ade84d6507.png"></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="and-on-the-client-side">And on the client-side:<a aria-hidden="true" class="hash-link" href="#and-on-the-client-side" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// TODO: Replace with your own Firebase config</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> firebaseConfig </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  apiKey</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;asfasdfasdf&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  authDomain</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;trends-sp22-lecture-8.firebaseapp.com&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  projectId</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;trends-sp22-lecture-8&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  storageBucket</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;trends-sp22-lecture-8.appspot.com&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  messagingSenderId</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;sijiofdsjdi&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  appId</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;1:3209483200:web:u897j8ydq973342&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> app </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">getApps</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">length </span><span class="token operator" style="color:rgb(56, 58, 66)">?</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">getApp</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">initializeApp</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">firebaseConfig</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> db </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">getFirestore</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> provider </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">GoogleAuthProvider</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">provider</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">setCustomParameters</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  login_hint</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;user@example.com&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  hd</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;cornell.edu&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">provider</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">addScope</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;email&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> auth </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">getAuth</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token function" style="color:rgb(64, 120, 242)">signInWithPopup</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">auth</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> provider</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">then</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// This gives you a Google Access Token. You can use it to access the Google API.</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> credential </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> GoogleAuthProvider</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">credentialFromResult</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> token </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> credential</span><span class="token operator" style="color:rgb(56, 58, 66)">?.</span><span class="token plain">accessToken</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// The signed-in user info.</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> user </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token function" style="color:rgb(64, 120, 242)">userUpload</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> db</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">catch</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// Handle Errors here.</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> errorCode </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">code</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> errorMessage </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// The email of the user&#x27;s account used.</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> email </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">email</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// The AuthCredential type that was used.</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> credential </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> GoogleAuthProvider</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">credentialFromError</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"> db </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="architecting-the-app">Architecting the App<a aria-hidden="true" class="hash-link" href="#architecting-the-app" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="avoid-hard-coding-routes">Avoid Hard-coding Routes!<a aria-hidden="true" class="hash-link" href="#avoid-hard-coding-routes" title="Direct link to heading">â€‹</a></h3><p>It&#x27;s a good practice to avoid hard-coding constants such as the path to each collection. Better to include these into a <code>fireRoutes.ts</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">BOOKS_PATH</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;books&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">REVIEWERS_PATH</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;reviewers&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">REVIEWS_PATH</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;reviews&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="writing-our-collection-query-hooks">Writing our collection query hooks<a aria-hidden="true" class="hash-link" href="#writing-our-collection-query-hooks" title="Direct link to heading">â€‹</a></h3><p>With the database set up, we need to build queries on the database as well as actions that can write to the database. To avoid prop drilling, we need to build custom React hooks that allow any component to use and &quot;hook into&quot; our data. Our custom hooks need to always have the most up-to-date data available (it is a real-time database after all), so we need to store the information in state variables (so that any components using these variables will be updated when the variable updates).</p><p>We can start this a file <code>fireHooks.ts</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">useCollectionWithCallback</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  collectionId</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">callback</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">void</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token plain">coll</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> setColl</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(64, 120, 242)">useState</span><span class="token generic-function generic class-name operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token generic-function generic class-name" style="color:rgb(193, 132, 1)">DocumentData</span><span class="token generic-function generic class-name punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token generic-function generic class-name punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token generic-function generic class-name" style="color:rgb(193, 132, 1)"> </span><span class="token generic-function generic class-name operator" style="color:rgb(56, 58, 66)">|</span><span class="token generic-function generic class-name" style="color:rgb(193, 132, 1)"> </span><span class="token generic-function generic class-name keyword" style="color:rgb(166, 38, 164)">undefined</span><span class="token generic-function generic class-name operator" style="color:rgb(56, 58, 66)">&gt;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> collectionRef </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">collection</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> collectionId</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// Trigger an effect whenever the query returns a new snapshot</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token function" style="color:rgb(64, 120, 242)">useEffect</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> unsubscribe </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">onSnapshot</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token function" style="color:rgb(64, 120, 242)">query</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">collectionRef</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">querySnapshot</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> docsInCollection</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> DocumentData</span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">      querySnapshot</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">forEach</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> docsInCollection</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">push</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">data</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// in the effect, set the collection data. This triggers an update in any component using &#x27;coll&#x27; (using this collection hook).</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token function" style="color:rgb(64, 120, 242)">setColl</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">docsInCollection</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token function" style="color:rgb(64, 120, 242)">callback</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// run any any cleanup code</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token function" style="color:rgb(64, 120, 242)">unsubscribe</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token plain">collectionId</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> coll</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Alternatively, in a slightly nicer (more functional, more Observable-y way), we can use the rxFire package to simplify some of the code for us:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">useCollectionWithCallback2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  collectionId</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">callback</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">void</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token plain">coll</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> setColl</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(64, 120, 242)">useState</span><span class="token generic-function generic class-name operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token generic-function generic class-name" style="color:rgb(193, 132, 1)">DocumentData</span><span class="token generic-function generic class-name punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token generic-function generic class-name punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token generic-function generic class-name" style="color:rgb(193, 132, 1)"> </span><span class="token generic-function generic class-name operator" style="color:rgb(56, 58, 66)">|</span><span class="token generic-function generic class-name" style="color:rgb(193, 132, 1)"> </span><span class="token generic-function generic class-name keyword" style="color:rgb(166, 38, 164)">undefined</span><span class="token generic-function generic class-name operator" style="color:rgb(56, 58, 66)">&gt;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> collectionRef </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">collection</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> collectionId</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// trigger an effect whenever the collectionData observable publishes a new version of the data</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token function" style="color:rgb(64, 120, 242)">useEffect</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">collectionData</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">collectionRef</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">subscribe</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">c</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> DocumentData</span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// in the effect, set the collection data. This triggers an update in any component using &#x27;coll&#x27; (using this collection hook).</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token function" style="color:rgb(64, 120, 242)">setColl</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token function" style="color:rgb(64, 120, 242)">callback</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// run any any cleanup code</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      subscription</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">unsubscribe</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token plain">collectionId</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> coll</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="build-actions-to-write-to-our-database">Build Actions to Write to our Database<a aria-hidden="true" class="hash-link" href="#build-actions-to-write-to-our-database" title="Direct link to heading">â€‹</a></h3><p>Recall the &#x27;anatomy of a Firestore real-time app&#x27; image. Now that we have hooked into our data, we need calls that will write to the data. In our case, we need calls to add, edit, and delete reviews. We also need calls to add books and get books/reviews by ID. NOTE: in this tutorial, we use the shortcut of concatenating titles and authors/reviewers to generate document IDs. DO NOT ACTUALLY DO THIS! Do the extra work of generating a Firestore document id with <code>doc()</code>.</p><p>Editing reviews:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">editReview</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">id</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> update</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> Partial</span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token plain">FireReview</span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">setDoc</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token function" style="color:rgb(64, 120, 242)">doc</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">REVIEWS_PATH</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> update</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"> merge</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Adding reviews:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">addReview</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">id</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> book</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// shh</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token function" style="color:rgb(64, 120, 242)">editReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> book</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Deleting reviews.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">deleteReview</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">id</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">deleteDoc</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token function" style="color:rgb(64, 120, 242)">doc</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">REVIEWS_PATH</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Adding a book (when there is a new revew on a book that does not quite exist). Note that we use a <code>transaction</code> to create the book, because multiple users can attempt to create a book at the same time, so there may be data races (and we want to avoid duplicate entries).</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">addBook</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">id</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> book</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireBook</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">runTransaction</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">transaction</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> bookDocRef </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">doc</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">BOOKS_PATH</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> bookDoc </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">await</span><span class="token plain"> transaction</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">get</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">bookDocRef</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">bookDoc</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">exists</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token keyword" style="color:rgb(166, 38, 164)">throw</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(80, 161, 79)">`</span><span class="token template-string string" style="color:rgb(80, 161, 79)">Book </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">${</span><span class="token template-string interpolation">book</span><span class="token template-string interpolation punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token template-string interpolation">title</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token template-string string" style="color:rgb(80, 161, 79)"> by </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">${</span><span class="token template-string interpolation">book</span><span class="token template-string interpolation punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token template-string interpolation">author</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token template-string string" style="color:rgb(80, 161, 79)"> already exists!</span><span class="token template-string template-punctuation string" style="color:rgb(80, 161, 79)">`</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">      transaction</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">update</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">bookDocRef</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> book</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token builtin" style="color:rgb(152, 104, 1)">console</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">log</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;Transaction failed: &#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Getting books and reviews by id:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">getBookId</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">book</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireBook</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(80, 161, 79)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">${</span><span class="token template-string interpolation">book</span><span class="token template-string interpolation punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token template-string interpolation">title</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token template-string string" style="color:rgb(80, 161, 79)">::</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">${</span><span class="token template-string interpolation">book</span><span class="token template-string interpolation punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token template-string interpolation">author</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token template-string template-punctuation string" style="color:rgb(80, 161, 79)">`</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">getReviewId</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">review</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(80, 161, 79)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">${</span><span class="token template-string interpolation">review</span><span class="token template-string interpolation punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token template-string interpolation">title</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token template-string string" style="color:rgb(80, 161, 79)">::</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">${</span><span class="token template-string interpolation">review</span><span class="token template-string interpolation punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token template-string interpolation">author</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token template-string string" style="color:rgb(80, 161, 79)">::</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">${</span><span class="token template-string interpolation">review</span><span class="token template-string interpolation punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token template-string interpolation">reviewer</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token template-string template-punctuation string" style="color:rgb(80, 161, 79)">`</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Uploading a user when auth:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">userUpload</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">user</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> User </span><span class="token operator" style="color:rgb(56, 58, 66)">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">null</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> db</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> Firestore</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">user </span><span class="token operator" style="color:rgb(56, 58, 66)">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">null</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> uid </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">uid</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> email </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">email </span><span class="token operator" style="color:rgb(56, 58, 66)">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;Dummy Email&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token function" style="color:rgb(64, 120, 242)">runTransaction</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">transaction</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> userDocumentReference </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">doc</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token function" style="color:rgb(64, 120, 242)">collection</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">db</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">REVIEWERS_PATH</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> uid</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> userDocument </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">await</span><span class="token plain"> transaction</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">get</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">userDocumentReference</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token operator" style="color:rgb(56, 58, 66)">!</span><span class="token plain">userDocument</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">exists</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> fullUserDocument</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReviewer </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">          email</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        transaction</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">set</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">userDocumentReference</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> fullUserDocument</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// eslint-disable-next-line no-console</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">catch</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">console</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">error</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;Unable to upload user.&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="finally-the-filters-to-search--sort-reviews">Finally, the filters to search &amp; sort reviews<a aria-hidden="true" class="hash-link" href="#finally-the-filters-to-search--sort-reviews" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"> FireReview </span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&#x27;../types&#x27;</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">sortByRating</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">reviews</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token operator" style="color:rgb(56, 58, 66)">...</span><span class="token plain">reviews</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">sort</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">reviewA</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> reviewB</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> reviewA</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">rating </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> reviewB</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">rating</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">filterByTitle</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">reviews</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> title</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  reviews</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">filter</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(56, 58, 66)">===</span><span class="token plain"> title</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">filterByAuthor</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">reviews</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> author</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  reviews</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">filter</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">author </span><span class="token operator" style="color:rgb(56, 58, 66)">===</span><span class="token plain"> author</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">filterByReviewer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">reviews</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> reviewer</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  reviews</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">filter</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">reviewer </span><span class="token operator" style="color:rgb(56, 58, 66)">===</span><span class="token plain"> reviewer</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">filterByBook</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  reviews</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  title</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  author</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  reviews</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">filter</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">title </span><span class="token operator" style="color:rgb(56, 58, 66)">===</span><span class="token plain"> title </span><span class="token operator" style="color:rgb(56, 58, 66)">&amp;&amp;</span><span class="token plain"> review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">author </span><span class="token operator" style="color:rgb(56, 58, 66)">===</span><span class="token plain"> author</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now how can we use the above functions to implement the main feature of our books review platform?</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><pre tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar" style="background-color:#fafafa"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">getAvgRatingForBook</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  reviews</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  title</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  author</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">string</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> filteredList </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">filterByBook</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">reviews</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> title</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> author</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    filteredList</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">reduce</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">prevSum</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> prevSum </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> review</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">rating</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">/</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    filteredList</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">length</span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(64, 120, 242)">paginateReviews</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  reviews</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> FireReview</span><span class="token punctuation" style="color:rgb(56, 58, 66)">[</span><span class="token punctuation" style="color:rgb(56, 58, 66)">]</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  resultsPerPage</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">number</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  page</span><span class="token operator" style="color:rgb(56, 58, 66)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">number</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(56, 58, 66)">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> lastPage </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">ceil</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">reviews</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token plain">length </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">/</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">const</span><span class="token plain"> pageSanitized </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">min</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">Math</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">max</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> page</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> reviews</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">filter</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      i </span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;</span><span class="token plain"> pageSanitized </span><span class="token operator" style="color:rgb(56, 58, 66)">*</span><span class="token plain"> resultsPerPage </span><span class="token operator" style="color:rgb(56, 58, 66)">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      i </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(56, 58, 66)">.</span><span class="token function" style="color:rgb(64, 120, 242)">min</span><span class="token punctuation" style="color:rgb(56, 58, 66)">(</span><span class="token plain">pageSanitized </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"> lastPage</span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(56, 58, 66)">)</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(56, 58, 66)">}</span><span class="token punctuation" style="color:rgb(56, 58, 66)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/2022fa/lecture6"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Lecture 6</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/2022fa/lecture8"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lecture 8<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#querying-methods-for-your-reactnextjs-app" class="table-of-contents__link toc-highlight">Querying Methods for your React/Next.js App</a><ul><li><a href="#how-do-callbackpromise-based-vs-real-time-queries-look-like" class="table-of-contents__link toc-highlight">How do Callback/Promise-based vs. Real-Time Queries Look Like?</a></li><li><a href="#how-do-callbackpromised-based-vs-real-time-queries-work" class="table-of-contents__link toc-highlight">How Do Callback/Promised Based vs. Real-Time Queries Work?</a></li><li><a href="#choosing-a-querying-method" class="table-of-contents__link toc-highlight">Choosing a Querying Method</a></li></ul></li><li><a href="#your-firebase-firestore-application-callbackpromise-based-or-real-time-queries" class="table-of-contents__link toc-highlight">Your Firebase Firestore Application: Callback/Promise-based or Real-Time Queries</a></li><li><a href="#firestore-real-time-queries" class="table-of-contents__link toc-highlight">Firestore Real-time Queries</a></li><li><a href="#anatomy-of-a-firebase-firestore-real-time-application-the-full-stack" class="table-of-contents__link toc-highlight">Anatomy of a Firebase Firestore Real-Time Application (The &quot;Full&quot; Stack)</a></li><li><a href="#miscellaneous-advice" class="table-of-contents__link toc-highlight">Miscellaneous Advice</a></li><li><a href="#the-problem" class="table-of-contents__link toc-highlight">The Problem</a></li><li><a href="#modeling-the-problem" class="table-of-contents__link toc-highlight">Modeling the Problem</a><ul><li><a href="#q-what-are-the-main-entities-in-the-model" class="table-of-contents__link toc-highlight">Q: What are the main entities in the model?</a></li><li><a href="#q-if-each-entity-can-be-represented-by-a-data-object-what-will-the-structure-be-like" class="table-of-contents__link toc-highlight">Q: If each Entity can be represented by a data object, what will the structure be like?</a></li></ul></li><li><a href="#building-out-our-solution" class="table-of-contents__link toc-highlight">Building Out our Solution</a><ul><li><a href="#q-what-typescript-types-do-we-need-to-write-make-our-data-structures-concrete" class="table-of-contents__link toc-highlight">Q: What Typescript types do we need to write make our data structures concrete?</a></li></ul></li><li><a href="#setting-up-our-database" class="table-of-contents__link toc-highlight">Setting Up our Database</a><ul><li><a href="#create-collections" class="table-of-contents__link toc-highlight">Create Collections</a></li><li><a href="#set-up-authentication" class="table-of-contents__link toc-highlight">Set Up Authentication</a></li></ul></li><li><a href="#architecting-the-app" class="table-of-contents__link toc-highlight">Architecting the App</a><ul><li><a href="#avoid-hard-coding-routes" class="table-of-contents__link toc-highlight">Avoid Hard-coding Routes!</a></li><li><a href="#writing-our-collection-query-hooks" class="table-of-contents__link toc-highlight">Writing our collection query hooks</a></li><li><a href="#build-actions-to-write-to-our-database" class="table-of-contents__link toc-highlight">Build Actions to Write to our Database</a></li><li><a href="#finally-the-filters-to-search--sort-reviews" class="table-of-contents__link toc-highlight">Finally, the filters to search &amp; sort reviews</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Course</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/setup-environment">Setup Environment</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/setup-editor">Setup Editor</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/unit1">First Lecture</a></li></ul></div><div class="col footer__col"><div class="footer__title">Cornell DTI</div><ul class="footer__items"><li class="footer__item"><a href="https://www.cornelldti.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/cornell-dti" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/cornelldti/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://medium.com/cornell-design-tech-initiative/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Cornell DTI Products</div><ul class="footer__items"><li class="footer__item"><a href="https://courseplan.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Course Plan<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.cureviews.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CU Reviews<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://queueme.in/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Queue Me In<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.cudesign.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Design @ Cornell<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://zing-lsc-prod.web.app/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Zing<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/dti-text-logo.png" alt="Cornell DTI Text Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/dti-text-logo.png" alt="Cornell DTI Text Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Copyright Â© 2021 Cornell Design & Tech Initiative. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a01393e0.js"></script>
<script src="/assets/js/main.f3425def.js"></script>
</body>
</html>